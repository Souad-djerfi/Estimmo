
{% extends 'Shared/default.html' %}
{% block body%}

	
	{% include 'Shared/menu.html'%}
	
        
		<div class="container-fluid">
		    <div class="row">
		      <br>
		    </div>
		    <div class="row"> 
		      	<div class="col-2"> 
		            {% include 'Shared/menu_recherche.html'%}
		    	</div>
			    <div class="col-10"> 
			    	
			          <div class="card" >
			            
			            <h5 class="card-header card text-center d-inline"> <i class="fa fa-list-ul"></i> Liste des biens: </h5>
			              <div class="card-body">
			                <div class="border border_secondary rounded-sm" > 
			                  <form id="form" method="POST" class="container form-horizontal " enctype="multipart/form-data" ACTION="{{ url_for('recherche') }}">
			                    <div class="input-group mb-3" >
			                      <div class="input-group-prepend">
			                        <button class="btn btn-info" type="submit" id="button-addon1">Rechercher</button>
			                      </div>
			                      <input type="text" class="form-control" name="rech_chauf" placeholder="Bien" aria-label="Example text with button addon" aria-describedby="button-addon1">
			                      <div class="input-group-append">
			                        <!-- Button trigger modal -->
			                        <button  type="button"   class="btn btn-info" data-toggle="modal" data-target="#modifier_bien" data-whatever="@getbootstrap"  >Modifier Bien</button>

			                        <button type="button"  class="btn btn-outline-secondary" data-toggle="modal" data-target="#supprimer_bien" value="Submit form"> Supprimer </button>
			                      </div>
			                    </div>
			                    <div style=" max-height: 70vh; overflow-y: scroll; ">
				                    <table id ='list_bien' class="table table-hover" >
				                      <thead>
				                        <tr>
				                          <th scope="col">#</th>
				                          <th scope="col" style="width:16%;">Longitude</th>
				                          <th scope="col" style="width:16%;">Latitude</th>
				                          <th scope="col" style="width:14%;">Housing_MA</th>
				                          <th scope="col" style="width:12%;">T_rooms</th>
				                          <th scope="col" style="width:12%;">T_bedrooms</th>
				                          <th scope="col" style="width:12%;">Population</th>
				                          <th scope="col" style="width:14%;">Households</th>
				                          <th scope="col" style="width:14%;">M_income</th>
				                          <th scope="col" style="width:14%;">M_house_value</th>
				                          <th scope="col" style="width:14%;">Ocean_proxi</th>
				                        </tr>
				                      </thead>
				                      <tbody>
				                        {% for i in filtre.index %}  
				                          <tr>
				                          	<th scope="row">
				                              <div class="form-check">
				                                <input class="form-check-input position-static" type="radio" checked="checked" name="chauf_select" id="R_chauf" value="{{filtre[0][i]}}" aria-label="...">
				                              </div>  
				                            </th>
				                            <td id="table_id_prix_median" hidden>{{filtre[0][i]}}</td>
				                            <td id="table_Longitude">{{filtre[1][i]}}</td>
				                            <td id="table_Latitude">{{filtre[2][i]}}</td>
				                            <td id="table_Housing_MA">{{filtre[3][i]}}</td>
				                            <td id="table_T_rooms">{{filtre[4][i]}}</td>
				                            <td id="table_T_bedrooms">{{filtre[5][i]}}</td>
				                            <td id="table_Population">{{filtre[6][i]}}</td>
				                            <td id="table_Households">{{filtre[7][i]}}</td>
				                            <td id="table_M_income">{{filtre[8][i]}}</td>
				                            <td id="table_M_house_value">{{filtre[9][i]}}</td>
				                            <td id="table_Ocean_proxi">{{filtre[11][i]}}</td>
				                          </tr>
				                        {% endfor %}
				                      </tbody>
				                    </table>
				                   </div> 
			                  </form>                          
			                </div>
			              </div>
			          </div>    
		        
		</div>
	</div>
</div>	  

<!--Modal modifier bien-->
<div class="modal fade" id="modifier_bien" tabindex="-1" aria-labelledby="modifier_bien" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modifier_bien">Effectuer les modifications...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form  method="POST" id= "form2" ACTION="{{ url_for('modifier_bien') }}">
        <div class="modal-body">
          <div class="form-group">
          	<div class="form-group row">
          		<label for="panier3" class="col-sm-4 col-form-label"><strong>Ocean_proxi:</strong></label>
          		<div class="col-sm-8">
	            <select name="modal_oceanP" class="custom-select" id="edit_oceanP" required>
	              <option value="" disabled selected=""> <B> Selectionner Ocean Proximity</B></option>
	              <option id="edit_OCEAN" value="1H OCEAN" >  1H OCEAN </option>
	              <option id="edit_OCEAN" value="NEAR OCEAN" >  NEAR OCEAN </option>
	              <option id="edit_OCEAN" value="ISLAND" >  ISLAND </option>
	              <option id="edit_OCEAN" value="NEAR BAY" >  NEAR BAY </option>
	              <option id="edit_OCEAN" value="INLAND" >  INLAND </option>
	            </select>
	           </div> 
           </div> 
            <input type="text" class="form-control" id="edit_id_prix_median" name="id_prix_median" hidden>
                      
            <div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Longitude:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_longitude" name= "longitude">
              </div> 
          	</div> 
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Latitude:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_latitude" name= "latitude">
              </div> 
          	</div> 
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Housing_m_age:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_housing_m_age" name= "Housing_m_age">
              </div> 
          	</div> 
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>total_rooms:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_total_rooms" name= "total_rooms">
              </div> 
          	</div> 
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>total_bedrooms:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_total_bedrooms" name= "total_bedrooms">
              </div> 
          	</div>
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Population:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_population" name= "population">
              </div> 
          	</div>
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Households:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_households" name= "households">
              </div> 
          	</div>
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Median_income:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_median_income" name= "median_income">
              </div> 
          	</div>
          	<div class="form-group row">
              <label for="panier3" class="col-sm-4 col-form-label"><strong>Median_house_v:</strong></label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="edit_median_house_value" name= "median_house_value">
              </div> 
          	</div>
        </div>  
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
          <input type="submit"  class="btn btn-primary" value='Confirmer modification' >
        </div>
      </form>
      </div>
    </div>
  </div>
</div> 

<!--Modal supprimer bien  -->
<div class="modal fade" id="supprimer_bien" tabindex="-1" aria-labelledby="supprimer_bien" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="supprimer_bien">Confirmation...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p> Veuillez confirmer la suppression du Bien coché</p>
      </div>
      <div class="modal-footer">
        <form action="{{ url_for('supprimer_bien') }}" method="post">
          <input type="text" class="form-control" id="edit_id_prix_m" name="id_prix_median" hidden>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
        <button type="submit" class="btn btn-primary"  >Supprimer</button>
      </form>
      </div>
    </div>
  </div>
</div>

<script>

  $('#modifier_bien').on('shown.bs.modal', function (e) {
    //debut
    var row_selected = $("input:radio:checked", "#list_bien").closest('tr');
    
    //var nom= row_selected.children("#table_nom").text();
    $('#edit_id_prix_median').val(row_selected.children("#table_id_prix_median").text())
    $('#edit_longitude').val(row_selected.children("#table_Longitude").text())

    //$('#edit_enseigne').row_selected(row_selected.children("#table_enseigne").show())
    $('#edit_latitude').val(row_selected.children("#table_Latitude").text())
    $('#edit_housing_m_age').val(row_selected.children("#table_Housing_MA").text())
    $('#edit_total_rooms').val(row_selected.children("#table_T_rooms").text())
    $('#edit_total_bedrooms').val(row_selected.children("#table_T_bedrooms").text())
    $('#edit_households').val(row_selected.children("#table_Households").text())
    $('#edit_population').val(row_selected.children("#table_Population").text())
    $('#edit_median_income').val(row_selected.children("#table_M_income").text())
    $('#edit_median_house_value').val(row_selected.children("#table_M_house_value").text())
    $('select[name="modal_oceanP"]').val(row_selected.children("#table_Ocean_proxi").text()).attr("selected", "selected")
    
   
    //fin
  })

  $('#supprimer_bien').on('shown.bs.modal', function (e) {
    //debut
    var row_selected = $("input:radio:checked", "#list_bien").closest('tr');
    
    //var nom= row_selected.children("#table_nom").text();
    
    $('#edit_id_prix_m').val(row_selected.children("#table_id_prix_median").text())
    
    //fin
  })
</script> 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script> 	
	{%endblock%}	